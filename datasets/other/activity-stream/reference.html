<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Activity Stream - Firefox Data Documentation</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../../../dtmo.css">
        
        <link rel="stylesheet" href="../../../mermaid.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="../../../introduction.html">Firefox Data Documentation</a></li><li class="expanded "><a href="../../../concepts/reporting_a_problem.html"><strong aria-hidden="true">1.</strong> Reporting a problem</a></li><li class="expanded "><a href="../../../concepts/terminology.html"><strong aria-hidden="true">2.</strong> Terminology</a></li><li class="expanded "><a href="../../../concepts/getting_started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/gaining_access.html"><strong aria-hidden="true">3.1.</strong> Gaining Access</a></li><li class="expanded "><a href="../../../concepts/analysis_intro.html"><strong aria-hidden="true">3.2.</strong> Analysis Quick Start</a></li><li class="expanded "><a href="../../../concepts/choosing_a_dataset.html"><strong aria-hidden="true">3.3.</strong> Choosing a Desktop Dataset</a></li><li class="expanded "><a href="../../../concepts/choosing_a_dataset_mobile.html"><strong aria-hidden="true">3.4.</strong> Choosing a Mobile Dataset</a></li><li class="expanded "><a href="../../../tools/stmo.html"><strong aria-hidden="true">3.5.</strong> Intro to STMO</a></li><li class="expanded "><a href="../../../concepts/analysis_gotchas.html"><strong aria-hidden="true">3.6.</strong> Common Analysis Gotchas</a></li><li class="expanded "><a href="../../../concepts/sql_optimization.html"><strong aria-hidden="true">3.7.</strong> Optimizing Queries</a></li><li class="expanded "><a href="../../../concepts/getting_help.html"><strong aria-hidden="true">3.8.</strong> Getting Help</a></li></ol></li><li class="expanded "><a href="../../../tools/index.html"><strong aria-hidden="true">4.</strong> Tools</a></li><li><ol class="section"><li class="expanded "><a href="../../../tools/projects.html"><strong aria-hidden="true">4.1.</strong> Project Glossary</a></li><li class="expanded "><a href="../../../tools/guiding_principles.html"><strong aria-hidden="true">4.2.</strong> Guiding Principles for Data Infrastructure</a></li><li class="expanded "><a href="../../../concepts/pipeline/gcp_data_pipeline.html"><strong aria-hidden="true">4.3.</strong> Overview of Mozilla's Data Pipeline</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/pipeline/http_edge_spec.html"><strong aria-hidden="true">4.3.1.</strong> HTTP Edge Server Specification</a></li><li class="expanded "><a href="../../../concepts/pipeline/event_pipeline.html"><strong aria-hidden="true">4.3.2.</strong> Event Pipeline Detail</a></li><li class="expanded "><a href="../../../concepts/pipeline/schemas.html"><strong aria-hidden="true">4.3.3.</strong> Schemas</a></li></ol></li><li class="expanded "><a href="../../../tools/interfaces.html"><strong aria-hidden="true">4.4.</strong> Analysis Interfaces</a></li><li class="expanded "><a href="../../../tools/spark.html"><strong aria-hidden="true">4.5.</strong> Custom analysis with Spark</a></li><li class="expanded "><a href="../../../concepts/sql_style.html"><strong aria-hidden="true">4.6.</strong> SQL Style Guide</a></li><li class="expanded "><a href="../../../concepts/glean/glean.html"><strong aria-hidden="true">4.7.</strong> Glean overview</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/glean/accessing_glean_data.html"><strong aria-hidden="true">4.7.1.</strong> Accessing Glean data</a></li><li class="expanded "><a href="../../../concepts/glean/debug_ping_view.html"><strong aria-hidden="true">4.7.2.</strong> Glean Debug ping viewer</a></li></ol></li><li class="expanded "><a href="../../../tools/alerts.html"><strong aria-hidden="true">4.8.</strong> Alerts</a></li><li class="expanded "><a href="../../../tools/gud.html"><strong aria-hidden="true">4.9.</strong> Growth &amp; Usage Dashboard (GUD)</a></li></ol></li><li class="expanded "><a href="../../../cookbooks/index.html"><strong aria-hidden="true">5.</strong> Analysis cookbooks</a></li><li><ol class="section"><li class="expanded "><a href="../../../cookbooks/bigquery.html"><strong aria-hidden="true">5.1.</strong> Accessing and working with BigQuery</a></li><li class="expanded "><a href="../../../cookbooks/dataset_specific.html"><strong aria-hidden="true">5.2.</strong> Dataset Specific</a></li><li><ol class="section"><li class="expanded "><a href="../../../cookbooks/normandy_events.html"><strong aria-hidden="true">5.2.1.</strong> Working with Normandy events</a></li><li class="expanded "><a href="../../../cookbooks/crash_pings.html"><strong aria-hidden="true">5.2.2.</strong> Working with Crash Pings</a></li></ol></li><li class="expanded "><a href="../../../cookbooks/realtime.html"><strong aria-hidden="true">5.3.</strong> Real-time</a></li><li><ol class="section"><li class="expanded "><a href="../../../cookbooks/view_pings_cep.html"><strong aria-hidden="true">5.3.1.</strong> Seeing Your Own Pings</a></li></ol></li><li class="expanded "><a href="../../../cookbooks/metrics.html"><strong aria-hidden="true">5.4.</strong> Metrics</a></li><li><ol class="section"><li class="expanded "><a href="../../../cookbooks/dau.html"><strong aria-hidden="true">5.4.1.</strong> Daily Active Users (DAU)</a></li><li class="expanded "><a href="../../../cookbooks/active_dau.html"><strong aria-hidden="true">5.4.2.</strong> Active DAU (aDAU)</a></li><li class="expanded "><a href="../../../cookbooks/retention.html"><strong aria-hidden="true">5.4.3.</strong> Retention</a></li></ol></li></ol></li><li class="expanded "><a href="../../../cookbooks/index.html"><strong aria-hidden="true">6.</strong> Operational cookbooks</a></li><li><ol class="section"><li class="expanded "><a href="../../../cookbooks/bigquery-airflow.html"><strong aria-hidden="true">6.1.</strong> Scheduling BigQuery Queries in Airflow</a></li><li class="expanded "><a href="../../../cookbooks/deploying-containers.html"><strong aria-hidden="true">6.2.</strong> Building and Deploying Containers to GCR with CircleCI</a></li></ol></li><li class="expanded "><a href="../../../datasets/new_data.html"><strong aria-hidden="true">7.</strong> Sending telemetry</a></li><li><ol class="section"><li class="expanded "><a href="../../../cookbooks/client_guidelines.html"><strong aria-hidden="true">7.1.</strong> Implementing Experiments</a></li><li class="expanded "><a href="../../../cookbooks/events_best_practices.html"><strong aria-hidden="true">7.2.</strong> Sending Events</a></li><li class="expanded "><a href="../../../cookbooks/new_ping.html"><strong aria-hidden="true">7.3.</strong> Sending a Custom Ping</a></li><li class="spacer"></li></ol></li><li class="expanded "><a href="../../../datasets/reference.html"><strong aria-hidden="true">8.</strong> Dataset Reference</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/pings.html"><strong aria-hidden="true">8.1.</strong> Pings</a></li><li class="expanded "><a href="../../../datasets/derived.html"><strong aria-hidden="true">8.2.</strong> Derived Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/active_profiles.html"><strong aria-hidden="true">8.2.1.</strong> Active Profiles</a></li><li class="expanded "><a href="../../../datasets/batch_view/addons/reference.html"><strong aria-hidden="true">8.2.2.</strong> Addons</a></li><li class="expanded "><a href="../../../datasets/other/addons_daily/reference.html"><strong aria-hidden="true">8.2.3.</strong> Addons Daily</a></li><li class="expanded "><a href="../../../datasets/other/attitudes_daily/reference.html"><strong aria-hidden="true">8.2.4.</strong> Attitudes Daily</a></li><li class="expanded "><a href="../../../datasets/batch_view/clients_daily/reference.html"><strong aria-hidden="true">8.2.5.</strong> Clients Daily</a></li><li class="expanded "><a href="../../../datasets/bigquery/clients_last_seen/reference.html"><strong aria-hidden="true">8.2.6.</strong> Clients Last Seen</a></li><li class="expanded "><a href="../../../datasets/batch_view/events/reference.html"><strong aria-hidden="true">8.2.7.</strong> Events</a></li><li class="expanded "><a href="../../../datasets/bigquery/exact_mau/reference.html"><strong aria-hidden="true">8.2.8.</strong> Exact MAU</a></li><li class="expanded "><a href="../../../datasets/batch_view/first_shutdown_summary/reference.html"><strong aria-hidden="true">8.2.9.</strong> First Shutdown Summary</a></li><li class="expanded "><a href="../../../datasets/batch_view/main_summary/reference.html"><strong aria-hidden="true">8.2.10.</strong> Main Summary</a></li><li class="expanded "><a href="../../../datasets/batch_view/new_profile/reference.html"><strong aria-hidden="true">8.2.11.</strong> New Profile</a></li><li class="expanded "><a href="../../../datasets/other/socorro_crash/reference.html"><strong aria-hidden="true">8.2.12.</strong> Socorro Crash Reports</a></li><li class="expanded "><a href="../../../datasets/other/ssl/reference.html"><strong aria-hidden="true">8.2.13.</strong> SSL Ratios (public)</a></li><li class="expanded "><a href="../../../datasets/batch_view/telemetry_aggregates/reference.html"><strong aria-hidden="true">8.2.14.</strong> Telemetry Aggregates</a></li><li class="expanded "><a href="../../../datasets/batch_view/update/reference.html"><strong aria-hidden="true">8.2.15.</strong> Update</a></li></ol></li><li class="expanded "><a href="../../../tools/experiments.html"><strong aria-hidden="true">8.3.</strong> Experimental Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/heartbeat.html"><strong aria-hidden="true">8.3.1.</strong> Accessing Heartbeat data</a></li><li class="expanded "><a href="../../../datasets/shield.html"><strong aria-hidden="true">8.3.2.</strong> Accessing Shield Study data</a></li></ol></li><li class="expanded "><a href="../../../datasets/search.html"><strong aria-hidden="true">8.4.</strong> Search Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/search/search_aggregates/reference.html"><strong aria-hidden="true">8.4.1.</strong> Search Aggregates</a></li><li class="expanded "><a href="../../../datasets/search/search_clients_daily/reference.html"><strong aria-hidden="true">8.4.2.</strong> Search Clients Daily</a></li></ol></li><li class="expanded "><a href="../../../datasets/other.html"><strong aria-hidden="true">8.5.</strong> Other Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/other/hgpush/reference.html"><strong aria-hidden="true">8.5.1.</strong> hgpush</a></li><li class="expanded "><a href="../../../datasets/other/stub_installer/reference.html"><strong aria-hidden="true">8.5.2.</strong> Stub installer ping</a></li><li class="expanded "><a href="../../../datasets/other/activity-stream/reference.html" class="active"><strong aria-hidden="true">8.5.3.</strong> Activity Stream</a></li><li class="expanded "><a href="../../../datasets/other/bmobugs/reference.html"><strong aria-hidden="true">8.5.4.</strong> bmobugs</a></li></ol></li><li class="expanded "><a href="../../../datasets/fxa.html"><strong aria-hidden="true">8.6.</strong> Firefox Accounts Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/fxa_metrics/attribution.html"><strong aria-hidden="true">8.6.1.</strong> Firefox Account Attribution</a></li><li class="expanded "><a href="../../../datasets/fxa_metrics/funnels.html"><strong aria-hidden="true">8.6.2.</strong> Firefox Account Funnel Metrics</a></li><li class="expanded "><a href="../../../datasets/fxa_metrics/emails.html"><strong aria-hidden="true">8.6.3.</strong> Firefox Account Email Metrics</a></li></ol></li><li class="expanded "><a href="../../../datasets/static.html"><strong aria-hidden="true">8.7.</strong> Static Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/static/normalized_os.html"><strong aria-hidden="true">8.7.1.</strong> Normalized OS Names And Versions</a></li><li class="spacer"></li></ol></li></ol></li><li class="expanded "><a href="../../../concepts/index.html"><strong aria-hidden="true">9.</strong> Telemetry Behavior Reference</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/history.html"><strong aria-hidden="true">9.1.</strong> History of Telemetry</a></li><li class="expanded "><a href="../../../concepts/profile/index.html"><strong aria-hidden="true">9.2.</strong> Profile Behavior</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/profile/profile_creation.html"><strong aria-hidden="true">9.2.1.</strong> Profile Creation</a></li><li class="expanded "><a href="../../../concepts/profile/realworldusage.html"><strong aria-hidden="true">9.2.2.</strong> Real World Usage</a></li><li class="expanded "><a href="../../../concepts/profile/profilehistory.html"><strong aria-hidden="true">9.2.3.</strong> Profile History</a></li></ol></li><li class="expanded "><a href="../../../concepts/channels/index.html"><strong aria-hidden="true">9.3.</strong> Channel Behavior</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/channels/channel_normalization.html"><strong aria-hidden="true">9.3.1.</strong> Channel Normalization and Querying</a></li></ol></li><li class="expanded "><a href="../../../concepts/censuses.html"><strong aria-hidden="true">9.4.</strong> Census metrics</a></li><li class="expanded "><a href="../../../concepts/engagement.html"><strong aria-hidden="true">9.5.</strong> Engagement metrics</a></li><li class="expanded "><a href="../../../concepts/sample_id.html"><strong aria-hidden="true">9.6.</strong> Sampling</a></li><li class="spacer"></li></ol></li><li class="expanded "><a href="../../../historical/index.html"><strong aria-hidden="true">10.</strong> Historical Reference</a></li><li><ol class="section"><li class="expanded "><a href="../../../concepts/pipeline/data_pipeline.html"><strong aria-hidden="true">10.1.</strong> Previous AWS Pipeline Overview</a></li><li class="expanded "><a href="../../../concepts/pipeline/data_pipeline_detail.html"><strong aria-hidden="true">10.2.</strong> In-depth AWS Data Pipeline Detail</a></li><li class="expanded "><a href="../../../datasets/obsolete.html"><strong aria-hidden="true">10.3.</strong> Obsolete Datasets</a></li><li><ol class="section"><li class="expanded "><a href="../../../datasets/obsolete/churn/reference.html"><strong aria-hidden="true">10.3.1.</strong> Churn</a></li><li class="expanded "><a href="../../../datasets/obsolete/client_count/reference.html"><strong aria-hidden="true">10.3.2.</strong> Client Count</a></li><li class="expanded "><a href="../../../datasets/obsolete/client_count_daily/reference.html"><strong aria-hidden="true">10.3.3.</strong> Client Count Daily</a></li><li class="expanded "><a href="../../../datasets/obsolete/crash_aggregates/reference.html"><strong aria-hidden="true">10.3.4.</strong> Crash Aggregates</a></li><li class="expanded "><a href="../../../datasets/obsolete/crash_summary/reference.html"><strong aria-hidden="true">10.3.5.</strong> Crash Summary</a></li><li class="expanded "><a href="../../../datasets/obsolete/error_aggregates/reference.html"><strong aria-hidden="true">10.3.6.</strong> Error Aggregates</a></li><li class="expanded "><a href="../../../datasets/obsolete/heavy_users/reference.html"><strong aria-hidden="true">10.3.7.</strong> Heavy Users</a></li><li class="expanded "><a href="../../../datasets/obsolete/longitudinal/reference.html"><strong aria-hidden="true">10.3.8.</strong> Longitudinal</a></li><li class="expanded "><a href="../../../datasets/obsolete/retention/reference.html"><strong aria-hidden="true">10.3.9.</strong> Retention</a></li><li class="expanded "><a href="../../../datasets/obsolete/sync_summary/reference.html"><strong aria-hidden="true">10.3.10.</strong> Sync Summary</a></li><li class="spacer"></li></ol></li></ol></li><li class="expanded "><a href="../../../meta/index.html"><strong aria-hidden="true">11.</strong> About this Documentation</a></li><li><ol class="section"><li class="expanded "><a href="../../../meta/contributing.html"><strong aria-hidden="true">11.1.</strong> Contributing</a></li><li class="expanded "><a href="../../../meta/structure.html"><strong aria-hidden="true">11.2.</strong> Structure</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Firefox Data Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/mozilla/firefox-data-docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#what-is-activity-stream" id="what-is-activity-stream">What is Activity Stream?</a></h1>
<p>Activity Stream is the Firefox module which manages the in product content pages for Firefox: </p>
<ul>
<li><code>about:home</code></li>
<li><code>about:newtab</code></li>
<li><code>about:welcome</code>
<ul>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1448918">starting with Firefox 62</a></li>
</ul>
</li>
</ul>
<p>The Activity Stream team has implemented data collection in and around these pages. This data has some overlap with the standard Firefox Telemetry system, however it is a custom system, designed and maintained by that team. </p>
<p>For specific questions about this data, reach out to the <code>#fx-messaging-system</code> Slack channel directly. </p>
<h2><a class="header" href="#activity-stream-pings" id="activity-stream-pings">Activity Stream Pings</a></h2>
<p>This data is measured in various custom pings that are sent via <a href="https://github.com/mozilla/ping-centre">PingCentre</a> (different from <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/internals/pingsender.html">Pingsender</a>). </p>
<ul>
<li><a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md">Activity Stream Pings: <code>data_events.md</code></a></li>
<li><a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_dictionary.md">Activity Stream Pings: <code>data_dictionary.md</code></a></li>
<li><a href="https://firefox-source-docs.mozilla.org/browser/components/newtab/docs/v2-system-addon/data_dictionary.html">Activity Stream Pings: Firefox Source Tree Documentation</a></li>
</ul>
<h2><a class="header" href="#accessing-activity-stream-data" id="accessing-activity-stream-data">Accessing Activity Stream Data</a></h2>
<p>The various Activity Stream pings are stored in tables stored in the <code>Tiles</code> Redshift database, maintained by the Activity Stream team. </p>
<p>This database can be accessed via <a href="https://sql.telemetry.mozilla.org/">re:dash</a>, or in Databricks via a <a href="https://dbc-caf9527b-e073.cloud.databricks.com/#notebook/155100/command/155102">workaround provided by the Data Operations team</a>, tracked in this <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1272388#c16">bug</a>. </p>
<h2><a class="header" href="#gotchas-and-caveats" id="gotchas-and-caveats">Gotchas and Caveats</a></h2>
<p>Since this data collection isn't collected or maintained through our standard Telemetry API, there are a number of &quot;gotchas&quot; to keep in mind when working on this data. </p>
<ul>
<li>
<p><strong>Ping send conditions</strong>: Activity Stream pings have different send conditions, both from Telemetry pings as well as from each other. <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#health-ping">AS Health Pings</a>, for example, get sent by all profiles with Telemetry enabled, upon startup of each Firefox session. In contrast, <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#session-end-pings">AS Session Pings</a> only get sent by profiles that entered an Activity Stream session, at the end of that session, regardless of how long that session is. Compare this to <code>main</code> pings, which get sent by all Telemetry enabled profiles upon subsession end (browser shutdown, environment change, or local midnight cutoff). </p>
<p>Due to these inconsistencies, using data from different sources can be tricky. For example, if we wanted to know how much of DAU (from <code>main</code> pings) had a custom <code>about:home</code> page (available in AS Health Pings), joining on <code>client_id</code> and a date field would only provide information on profiles that started the session on that same day (active profiles on multi-day sessions would be excluded). </p>
</li>
<li>
<p><strong>Population covered</strong>: In addition to the usual considerations when looking at a measurement (in what version of Firefox did this measurement start getting collected? In what channels is it enabled in? etc.), when working with this data, there are additional Activity Stream specific conditions to consider when deciding &quot;who is eligible to send this ping?&quot;</p>
<p>For example, Pocket recommendations are only enabled in the US, CA, and DE countries, for profiles that are on en-US, en-CA, and DE locales. Furthermore, users can set their <code>about:home</code> and <code>about:newtab</code> page to non-Activity Stream pages. This information can be important when deciding denominators for certain metrics. </p>
</li>
<li>
<p><strong>Different ping types in the same table</strong>: The tables in the <code>Tiles</code> database can contain multiple types of pings. For example, the <code>assa_events_daily</code> table contains both <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#page-takeover-ping">AS Page Takeover pings</a> as well as <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#user-event-pings">AS User Event pings</a>. </p>
</li>
<li>
<p><strong>Inconsistent fields</strong>: In some tables, the same field can have different meanings for different records. </p>
<p>For example, in the <code>assa_router_events_daily</code> table, the <code>impression_id</code> field corresponds to the standard Telemetry <code>client_id</code> field for <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#snippets-impression">Snippets impressions</a>, <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#cfr-impression-for-all-the-prerelease-channels-and-shield-experiment">CFR impressions for pre-release and shield experiments</a>, and <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#onboarding-impression">onboarding impressions</a>. However, for <a href="https://github.com/mozilla/activity-stream/blob/master/docs/v2-system-addon/data_events.md#cfr-impression-for-the-release-channel">CFR impressions for release</a>, this field is a separate, impression identifier. </p>
</li>
<li>
<p><strong>Passing Experiment Tags</strong>: If a profile is enrolled in a Normandy experiment, the experiment slug for that profile is only passed to the Activity Stream data if it contains the string &quot;activity-stream&quot;. </p>
<p>In other words, Activity Stream will not tag data as belonging to an experiment if it is missing &quot;activity-stream&quot; in the slug, even if it is indeed enrolled in an experiment. </p>
</li>
<li>
<p><strong>Data field formats</strong>: The format for some of the data that is shared with standard Telemetry can differ. </p>
<p>For example, experiment slugs in standard Telemetry is formatted as an array of maps (one for each experiment the profile is enrolled in) </p>
<p><code>[{'experiment1_name':'branch_name'}, {'experiment2_name':'branch_name'}]</code></p>
<p>However, in the Activity Stream telemetry, experiment slugs are reported in a string, using <code>;</code> as a separater between experiments and <code>:</code> as a separator between experiment name and branch name. </p>
<p><code>'experiment1_name:branch_name;experiment2_name:branch_name'</code></p>
</li>
<li>
<p><strong>Null handling</strong>: Some fields in the Activity Stream data encode nulls with a <code>'N/A'</code> string or a <code>-1</code> value. </p>
</li>
<li>
<p><strong>Changes in ping behaviors</strong>: These pings continue to undergo development and the behavior as well as possible values for a given ping seem to change over time. For example, older versions of the event pings for clicking on a Topsite do not seem to report <code>card_types</code> and <code>icon_types</code>, while newer versions do. Caution is advised. </p>
</li>
<li>
<p><strong>Pocket data</strong>: Data related to Pocket interaction and usage in the <code>about:home</code> and <code>about:newtab</code> pages get sent to Pocket via this data collection and pipeline. However, due to privacy reasons, that data is sanitized and <code>client_id</code> is randomized. So while it is possible to ask, &quot;how many Topsites and Highlights did a given profile click on in a given day?&quot;, we cannot answer that question for Pocket tiles. </p>
</li>
</ul>
<h2><a class="header" href="#examples" id="examples">Examples</a></h2>
<h4><a class="header" href="#sessions-per-client_id" id="sessions-per-client_id">Sessions per <code>client_id</code></a></h4>
<p>Note: only includes <code>client_ids</code> that completed an Activity Stream session that day. </p>
<pre><code>SELECT
	client_id, 
	date, 
	count(DISTINCT session_id) as num_sessions
FROM
	assa_sessions_daily_by_client_id
WHERE
	date = '20190601' 
GROUP BY 
	1
</code></pre>
<h4><a class="header" href="#topsite-clicks-and-highlights-clicks" id="topsite-clicks-and-highlights-clicks">Topsite clicks and Highlights clicks</a></h4>
<pre><code>SELECT
	client_id, 
	date, 
	session_id,
	page, 
	source, 
	action_position, 
	shield_id
FROM
	assa_events_daily
WHERE
	source in ('TOP_SITES', 'HIGHLIGHTS')
	AND event = 'CLICK'
	AND date = '20190601' 
</code></pre>
<h4><a class="header" href="#snippet-impressions-blocks-clicks-and-dismissals" id="snippet-impressions-blocks-clicks-and-dismissals">Snippet impressions, blocks, clicks, and dismissals</a></h4>
<p>Note: Which snippet message a record corresponds to can be identified by the <code>message_id</code> (check with Marketing for snippet recipes published). </p>
<pre><code>SELECT 
    impression_id AS client_id, 
    date, 
    source,
    event,
    message_id, 
    value,
    shield_id
FROM 
	assa_router_events_daily
WHERE 
	source = 'snippets_user_event'
  	AND date = '20190601'
</code></pre>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/mozilla/firefox-data-docs/edit/master/src/datasets/other/activity-stream/reference.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../../datasets/other/stub_installer/reference.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../../datasets/other/bmobugs/reference.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../../datasets/other/stub_installer/reference.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../../datasets/other/bmobugs/reference.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../../../mermaid.min.js"></script>
        
        <script type="text/javascript" src="../../../mermaid-init.js"></script>
        

        

    </body>
</html>
